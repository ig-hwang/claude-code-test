# API 연결 문제 해결 가이드

## 현재 상황

API 키를 설정했으나 "400 Bad Request - Request Blocked" 에러가 발생하고 있습니다.

## 가능한 원인 및 해결 방법

### 1. API 키 활성화 상태 확인

**공공데이터포털에서 확인:**
1. https://www.data.go.kr 로그인
2. 마이페이지 > 오픈API > 개발계정
3. "국토교통부_아파트 매매 실거래가 자료" 상태 확인
   - ✅ **승인** 상태여야 함
   - ⏳ **대기중**이면 승인 완료까지 기다려야 함 (보통 1-2시간)

### 2. 올바른 API 선택 확인

**중요:** 다음 API를 신청했는지 확인하세요:
- API 이름: **국토교통부_아파트매매 실거래 상세자료**
- API ID: `1613000/RTMSDataSvcAptTrade`
- URL: https://www.data.go.kr/data/15126469/openapi.do

**다른 유사한 API들:**
- "국토교통부 실거래가 정보" (파일 데이터) - ❌ 이것 아님
- "국토교통부_아파트매매 실거래자료" (구버전) - ❌ 이것 아님

### 3. API 키 형식 확인

**두 가지 형식의 키가 제공됩니다:**
- **일반 인증키 (Encoding)** - URL에 그대로 사용 ✅
- **일반 인증키 (Decoding)** - 내부 처리용 ❌

**올바른 키 확인:**
1. 마이페이지 > 오픈API > 개발계정
2. "일반 인증키 (Encoding)" 복사
3. `backend/.env` 파일에 붙여넣기

### 4. 트래픽 제한 확인

- 일일 트래픽 한도 초과 여부 확인
- 기본 한도: 1,000건/일

### 5. 대안: 다른 API 사용

현재 API가 작동하지 않는 경우:

**Option A: PublicDataReader 라이브러리 사용**
```bash
pip install PublicDataReader
```

**Option B: 서울시 부동산 실거래가 API**
- URL: https://data.seoul.go.kr/dataList/OA-21275/S/1/datasetView.do
- 마포구만 조회하는 경우 서울시 API도 가능

**Option C: 테스트용 Mock 데이터 계속 사용**
- 현재 "현재 매물" 탭에서 200건의 Mock 데이터 제공 중
- 학습/분석 목적으로는 충분히 사용 가능

## 즉시 확인할 사항

1. 공공데이터포털에서 API 승인 상태 확인
2. "일반 인증키 (Encoding)" 복사 여부 확인
3. API 신청이 올바른 API인지 확인

## 문의

문제가 계속되면:
- 공공데이터포털 고객센터: 1600-0082
- 국토교통부 실거래가 담당: 1599-0001
